pipeline {

  agent {
    kubernetes {
      label 'release-stable'
    }
  }

  options {
    artifactDaysToKeepStr: '14',
    artifactNumToKeepStr: '5',
    daysToKeepStr: '30',
    numToKeepStr: '10'
  }
  disableConcurrentBuilds()

  stages {
    stage("Release"){
      build 'core-release', parameters: [
        string(name: "RELEASE_PROFILE", value: "stable")
      ]
    }
    stage("Package"){
      build 'core-package', parameters: [
        string(name: "RELEASE_PROFILE", value: "stable")
      ]
    }
  }
}
